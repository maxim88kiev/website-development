<?php defined('_JEXEC') or die;

class SocialNetworkDetector
{
    private static $_social_networks = array(
        'facebook' => array(
            'modification' => 'fb',
            'svg' => '<svg fill="#979797" width="39" height="39" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" aria-hidden="true">
                <path d="M222.892,388h51.491c4.418,0,8-3.582,8-8V264.093h26.751c4.101,0,7.538-3.101,7.958-7.18l4.51-43.772 c0.232-2.252-0.501-4.498-2.019-6.179c-1.517-1.682-3.675-2.641-5.939-2.641h-31.261v-17.73c0-3.662,1.159-3.936,2.928-3.936 h27.682c4.418,0,8-3.582,8-8v-42.5c0-4.406-3.562-7.982-7.968-8L274.848,124c-26.752,0-41.029,11.77-48.295,21.643 c-10.146,13.787-11.661,29.941-11.661,38.343v20.334h-16.489c-4.418,0-8,3.582-8,8v43.772c0,4.418,3.582,8,8,8h16.489V380 C214.892,384.418,218.473,388,222.892,388z M206.402,248.093v-27.772h16.489c4.418,0,8-3.582,8-8v-28.334 c0-5.185,0.833-18.376,8.547-28.86c7.386-10.037,19.3-15.126,35.376-15.126l30.177,0.122v26.533h-19.682 c-9.421,0-18.928,6.164-18.928,19.936v25.73c0,4.418,3.582,8,8,8h30.395l-2.862,27.772h-27.533c-4.418,0-8,3.582-8,8V372h-35.491 V256.093c0-4.418-3.582-8-8-8H206.402z"></path>
                <path d="M437.022,74.984C388.67,26.63,324.381,0,256,0C187.624,0,123.338,26.63,74.984,74.984S0,187.624,0,256 c0,68.388,26.63,132.678,74.984,181.028C123.335,485.375,187.621,512,256,512c68.385,0,132.673-26.625,181.021-74.972 C485.372,388.679,512,324.389,512,256C512,187.622,485.372,123.336,437.022,74.984z M425.708,425.714 C380.381,471.039,320.111,496,256,496c-64.106,0-124.374-24.961-169.703-70.286C40.965,380.386,16,320.113,16,256 c0-64.102,24.965-124.37,70.297-169.702C131.63,40.965,191.898,16,256,16c64.108,0,124.378,24.965,169.708,70.297 C471.037,131.628,496,191.896,496,256C496,320.115,471.037,380.387,425.708,425.714z"></path>
                <path d="M430.038,114.969c-2.784-3.432-7.821-3.957-11.253-1.172c-3.431,2.784-3.956,7.822-1.172,11.252 C447.526,161.919,464,208.425,464,256c0,55.567-21.635,107.803-60.919,147.086C363.797,442.367,311.563,464,256,464 c-51.26,0-100.505-18.807-138.663-52.956c-3.292-2.946-8.35-2.666-11.296,0.626c-2.946,3.292-2.666,8.35,0.626,11.296 C147.763,459.745,200.797,480,256,480c59.837,0,116.089-23.297,158.394-65.601C456.701,372.094,480,315.84,480,256 C480,204.766,462.256,154.681,430.038,114.969z"></path>
                <path d="M48,256c0-114.691,93.309-208,208-208c51.26,0,100.504,18.808,138.662,52.959c3.293,2.948,8.351,2.666,11.296-0.625 c2.947-3.292,2.667-8.35-0.625-11.296C364.237,52.256,311.203,32,256,32c-59.829,0-116.079,23.301-158.389,65.611 C55.301,139.92,32,196.171,32,256c0,51.24,17.744,101.328,49.963,141.038c1.581,1.949,3.889,2.96,6.217,2.96 c1.771,0,3.553-0.585,5.036-1.788c3.431-2.784,3.956-7.822,1.172-11.253C64.474,350.088,48,303.58,48,256z"></path>
              </svg>'
        ),
        'youtube' => array(
            'modification' => 'yt',
            'svg' => '<svg fill="#979797" width="39" height="39" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" aria-hidden="true">
                <path d="M437.022,74.984C388.67,26.63,324.381,0,256,0C187.624,0,123.338,26.63,74.984,74.984S0,187.624,0,256 c0,68.388,26.63,132.678,74.984,181.028C123.335,485.375,187.621,512,256,512c68.385,0,132.673-26.625,181.021-74.972 C485.372,388.679,512,324.389,512,256C512,187.623,485.372,123.336,437.022,74.984z M425.708,425.714 C380.381,471.039,320.111,496,256,496c-64.106,0-124.374-24.961-169.703-70.286C40.965,380.386,16,320.113,16,256 c0-64.102,24.965-124.37,70.297-169.703C131.63,40.965,191.898,16,256,16c64.108,0,124.378,24.965,169.708,70.297 C471.037,131.628,496,191.896,496,256C496,320.115,471.037,380.387,425.708,425.714z"></path>
                <path d="M430.038,114.969c-2.784-3.432-7.821-3.957-11.253-1.172c-3.431,2.784-3.956,7.822-1.172,11.252 C447.526,161.919,464,208.426,464,256c0,55.567-21.635,107.803-60.919,147.085C363.797,442.367,311.563,464,256,464 c-51.26,0-100.505-18.807-138.663-52.956c-3.292-2.946-8.35-2.666-11.296,0.626s-2.666,8.35,0.626,11.296 C147.763,459.745,200.797,480,256,480c59.837,0,116.089-23.297,158.394-65.601C456.701,372.095,480,315.84,480,256 C480,204.767,462.256,154.681,430.038,114.969z"></path>
                <path d="M48,256c0-114.691,93.309-208,208-208c51.26,0,100.504,18.808,138.662,52.959c3.293,2.948,8.351,2.666,11.296-0.625 c2.947-3.292,2.667-8.35-0.625-11.296C364.237,52.256,311.203,32,256,32c-59.829,0-116.08,23.301-158.389,65.611 C55.301,139.921,32,196.171,32,256c0,51.239,17.744,101.328,49.963,141.038c1.581,1.949,3.889,2.96,6.217,2.96 c1.771,0,3.553-0.585,5.036-1.788c3.431-2.784,3.956-7.822,1.172-11.253C64.474,350.088,48,303.58,48,256z"></path>
                <path d="M393.81,199.21c-0.297-2.237-3.165-22.123-12.481-32.244c-11.127-12.384-23.789-13.666-29.877-14.283 c-0.531-0.054-1.019-0.103-1.458-0.156c-0.12-0.015-0.239-0.027-0.359-0.036c-36.754-2.849-92.235-2.882-92.792-2.882h-0.124 c-0.556,0-56.038,0.033-92.784,2.882c-0.12,0.009-0.24,0.021-0.359,0.036c-0.438,0.054-0.926,0.103-1.458,0.156 c-6.086,0.616-18.742,1.897-29.876,14.282c-9.308,10.117-12.184,30.004-12.481,32.242c-0.006,0.044-0.011,0.089-0.017,0.133 c-0.11,0.947-2.689,23.462-2.689,46.399v21.314c0,22.953,2.579,45.46,2.689,46.407c0.005,0.043,0.011,0.087,0.016,0.131 c0.297,2.237,3.166,22.118,12.486,32.224c10.304,11.453,23.351,13.129,30.365,14.031c1.235,0.159,2.302,0.296,3.029,0.441 c0.248,0.049,0.498,0.087,0.75,0.113c21.2,2.171,87.505,2.839,90.409,2.867c0.557-0.001,56.085-0.132,92.828-2.947 c0.136-0.01,0.271-0.024,0.405-0.042c0.452-0.058,0.957-0.109,1.507-0.167c6.074-0.635,18.705-1.955,29.789-14.292 c9.309-10.104,12.184-29.979,12.481-32.216c0.006-0.044,0.011-0.089,0.017-0.134c0.11-0.947,2.688-23.461,2.689-46.406v-21.315 c0-22.945-2.579-45.459-2.689-46.407C393.821,199.297,393.815,199.254,393.81,199.21z M380.514,267.063 c0,21.399-2.42,43.136-2.575,44.499c-0.602,4.445-3.392,18.033-8.397,23.436c-0.03,0.032-0.06,0.065-0.089,0.098 c-6.977,7.786-14.56,8.578-19.578,9.103c-0.6,0.063-1.155,0.122-1.661,0.184c-36.146,2.754-90.895,2.884-91.352,2.886 c-0.678-0.007-67.638-0.68-88.505-2.75c-1.154-0.212-2.398-0.372-3.707-0.541c-5.992-0.77-14.199-1.825-20.538-8.893 c-0.03-0.033-0.06-0.066-0.09-0.099c-4.448-4.797-7.503-16.895-8.394-23.436c-0.158-1.395-2.575-23.106-2.575-44.496V245.74 c0-21.4,2.422-43.145,2.575-44.493c0.602-4.449,3.394-18.048,8.401-23.464c0.027-0.03,0.055-0.06,0.082-0.09 c7.008-7.814,14.596-8.582,19.617-9.091c0.58-0.059,1.118-0.114,1.61-0.172c36.127-2.788,90.83-2.821,91.379-2.821h0.124 c0.549,0,55.252,0.033,91.387,2.821c0.491,0.058,1.03,0.113,1.61,0.172c5.023,0.508,12.614,1.277,19.614,9.088 c0.029,0.032,0.058,0.063,0.086,0.095c4.45,4.808,7.506,16.91,8.4,23.466c0.158,1.393,2.575,23.113,2.575,44.496L380.514,267.063z"></path>
                <path d="M310.355,249.579l-82.356-49.415c-2.472-1.482-5.549-1.521-8.058-0.102c-2.508,1.42-4.059,4.079-4.059,6.961v98.829 c0,2.882,1.55,5.542,4.059,6.961c1.224,0.693,2.583,1.039,3.941,1.039c1.426,0,2.851-0.381,4.116-1.14l82.356-49.415 c2.409-1.446,3.884-4.05,3.884-6.86S312.765,251.024,310.355,249.579z M231.883,291.724v-70.57l58.808,35.285L231.883,291.724z"></path>
              </svg>'
        ),
        'instagram' => array(
            'modification' => 'ig',
            'svg' => '<svg fill="#979797" width="39" height="39" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 409.602 409.602" aria-hidden="true">
                <path d="M349.617,59.988C310.938,21.305,259.504,0,204.801,0S98.672,21.305,59.988,59.988C21.305,98.672,0,150.098,0,204.801 c0,54.711,21.305,106.14,59.988,144.82c38.68,38.68,90.11,59.981,144.813,59.981c54.707,0,106.137-21.301,144.816-59.981 c38.68-38.68,59.985-90.109,59.985-144.82C409.602,150.098,388.297,98.668,349.617,59.988L349.617,59.988z M340.566,340.57 c-36.261,36.262-84.476,56.231-135.765,56.231c-51.285,0-99.5-19.969-135.762-56.231c-36.266-36.261-56.238-84.48-56.238-135.769 c0-51.281,19.972-99.496,56.238-135.762s84.481-56.238,135.762-56.238c51.285,0,99.5,19.972,135.765,56.238 c36.262,36.262,56.235,84.477,56.235,135.762C396.801,256.094,376.828,304.309,340.566,340.57L340.566,340.57z M340.566,340.57"></path>
                <path d="M344.031,91.977c-2.226-2.747-6.258-3.168-9.004-0.938c-2.746,2.227-3.164,6.258-0.937,9 c23.93,29.496,37.109,66.699,37.109,104.762c0,44.453-17.308,86.242-48.734,117.668c-31.426,31.426-73.215,48.73-117.664,48.73 c-41.008,0-80.406-15.043-110.93-42.363c-2.637-2.359-6.68-2.133-9.039,0.5c-2.355,2.633-2.133,6.68,0.5,9.035 C118.211,367.797,160.637,384,204.801,384c47.867,0,92.871-18.637,126.715-52.48C365.359,297.676,384,252.672,384,204.801 C384,163.812,369.805,123.746,344.031,91.977L344.031,91.977z M344.031,91.977"></path>
                <path d="M38.398,204.801c0-91.754,74.649-166.403,166.403-166.403c41.008,0,80.402,15.047,110.929,42.368 c2.633,2.359,6.68,2.132,9.036-0.5c2.359-2.633,2.132-6.68-0.5-9.036c-32.875-29.425-75.305-45.628-119.465-45.628 c-47.863,0-92.863,18.64-126.711,52.488c-33.848,33.847-52.488,78.847-52.488,126.711c0,40.992,14.195,81.062,39.968,112.828 c1.266,1.562,3.11,2.371,4.973,2.371c1.418,0,2.844-0.469,4.031-1.434c2.742-2.226,3.164-6.257,0.938-9 C51.578,280.07,38.398,242.863,38.398,204.801L38.398,204.801z M38.398,204.801"></path>
                <path d="M258.59,102.125h-107.18c-27.176,0-49.285,22.11-49.285,49.286v107.179c0,27.177,22.109,49.286,49.285,49.286h107.18 c27.176,0,49.284-22.109,49.284-49.286V151.411C307.874,124.235,285.766,102.125,258.59,102.125z M294.898,258.589 c0,20.02-16.288,36.309-36.308,36.309h-107.18c-20.019,0-36.305-16.289-36.305-36.309V151.411 c0-20.019,16.287-36.305,36.305-36.305h107.18c20.02,0,36.308,16.287,36.308,36.305V258.589z"></path>
                <path d="M262.503,139.728c-4.358,0-7.904,3.545-7.904,7.901c0,4.356,3.546,7.9,7.904,7.9c4.356,0,7.9-3.544,7.9-7.9 C270.403,143.273,266.859,139.728,262.503,139.728z"></path>
                <path d="M204.998,154.57c-27.806,0-50.428,22.622-50.428,50.428c0,27.808,22.622,50.432,50.428,50.432 c27.808,0,50.432-22.624,50.432-50.432C255.43,177.192,232.806,154.57,204.998,154.57z M204.998,242.454 c-20.652,0-37.453-16.803-37.453-37.456c0-20.648,16.801-37.446,37.453-37.446c20.65,0,37.449,16.798,37.449,37.446 C242.448,225.651,225.648,242.454,204.998,242.454z"></path>
              </svg>'
        ),
        'twitter' => array(
            'modification' => 'vb',
            'svg' => '<svg fill="#979797" width="39" height="39" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 46 46">
                <path d="M39.3,6.7C34.9,2.4,29.1,0,23,0S11.1,2.4,6.7,6.7S0,16.9,0,23s2.4,11.9,6.7,16.3C11.1,43.6,16.9,46,23,46s11.9-2.4,16.3-6.7 C43.6,34.9,46,29.1,46,23S43.6,11.1,39.3,6.7z M38.2,38.2c-4.1,4.1-9.5,6.3-15.2,6.3c-5.8,0-11.2-2.2-15.2-6.3 c-4.1-4-6.4-9.4-6.4-15.2S3.6,11.8,7.7,7.8c4.1-4.1,9.5-6.3,15.2-6.3c5.8,0,11.2,2.2,15.2,6.3c4.1,4.1,6.3,9.5,6.3,15.2 C44.6,28.8,42.3,34.2,38.2,38.2z"></path>
                <path d="M38.6,10.3c-0.3-0.3-0.7-0.4-1-0.1c-0.3,0.3-0.4,0.7-0.1,1c2.7,3.3,4.2,7.5,4.2,11.8c0,5-1.9,9.7-5.5,13.2 c-3.5,3.5-8.2,5.5-13.2,5.5c-4.6,0-9-1.7-12.5-4.8c-0.3-0.3-0.8-0.2-1,0.1c-0.3,0.3-0.2,0.8,0.1,1c3.7,3.3,8.5,5.1,13.4,5.1 c5.4,0,10.4-2.1,14.2-5.9c3.8-3.8,5.9-8.9,5.9-14.2C43.1,18.4,41.5,13.9,38.6,10.3z"></path>
                <path d="M4.3,23C4.3,12.7,12.7,4.3,23,4.3c4.6,0,9,1.7,12.5,4.8c0.3,0.3,0.8,0.2,1-0.1c0.3-0.3,0.2-0.8-0.1-1 C32.7,4.7,28,2.9,23,2.9C17.6,2.9,12.6,5,8.8,8.8S2.9,17.6,2.9,23c0,4.6,1.6,9.1,4.5,12.7C7.5,35.9,7.7,36,8,36 c0.2,0,0.3-0.1,0.5-0.2c0.3-0.3,0.4-0.7,0.1-1C5.8,31.5,4.3,27.3,4.3,23z"></path>
                <path d="M26.3,11.4h-5.1c-5.3,0-9.7,4-9.7,9v4.2c0,3.7,2.4,7,6.1,8.3v2.7c0,0.2,0.1,0.3,0.3,0.4c0.1,0,0.1,0,0.2,0s0.2,0,0.3-0.1 l3-2.5h4.9c5.3,0,9.7-4,9.7-9v-4.2C35.9,15.4,31.6,11.4,26.3,11.4z M34.9,24.6c0,4.4-3.8,8-8.6,8h-5c-0.1,0-0.2,0-0.3,0.1l-2.2,1.9 v-2c0-0.2-0.1-0.4-0.3-0.4C15,31,12.7,28,12.7,24.6v-4.2c0-4.4,3.8-8,8.6-8h5.1c4.8,0,8.6,3.6,8.6,8v4.2H34.9z"></path>
                <path d="M30.4,25.9L27.3,24c-0.3-0.2-0.7-0.3-1.2-0.2c-0.4,0.1-0.7,0.3-1,0.6l-0.1,0.2c-1.4-0.4-2.9-0.9-3.7-3.4l0.3-0.3l0,0 c0.6-0.5,0.7-1.4,0.1-2l-2.4-2.6c-0.2-0.2-0.5-0.2-0.7,0l-1.5,1.3c-1.4,1.1-0.7,2.7-0.5,3.3c0,0,0,0,0,0.1c0.1,0.1,1.3,2.2,3.4,4.1 c2,2,5.7,3.8,6,3.8c0.4,0.2,1,0.4,1.4,0.4c0.9,0,1.6-0.4,2.1-1.1l1.1-1.6C30.7,26.3,30.6,26,30.4,25.9z M28.6,27.6 c-0.4,0.6-1.4,0.8-2.1,0.4c0,0-3.7-1.8-5.7-3.7c-1.8-1.7-3.1-3.7-3.2-3.9c-0.4-1.1-0.3-1.7,0.2-2.1l1.2-0.9l2.1,2.2 c0.2,0.2,0.2,0.5,0,0.6l-0.6,0.5c-0.1,0.1-0.2,0.3-0.1,0.5c1.1,3.2,3.1,3.8,4.7,4.3l0.2,0.1c0.2,0.1,0.4,0,0.6-0.2l0.3-0.5 c0.1-0.1,0.2-0.2,0.3-0.2c0.1,0,0.3,0,0.4,0.1l2.7,1.6L28.6,27.6z"></path>
                <path d="M24.9,19.1c-0.3-0.1-0.5,0.1-0.6,0.3c-0.1,0.2,0.1,0.5,0.3,0.6c0.7,0.2,1.4,0.7,1.6,1.5c0.1,0.2,0.3,0.3,0.5,0.3h0.1 c0.3-0.1,0.4-0.3,0.3-0.6C26.8,20.2,26,19.3,24.9,19.1z"></path>
                <path d="M28.7,21.9h0.1c0.3-0.1,0.4-0.3,0.3-0.6c-0.6-2-2.3-3.6-4.4-4.1c-0.3-0.1-0.5,0.1-0.6,0.3c-0.1,0.2,0.1,0.5,0.3,0.6 c1.8,0.4,3.2,1.8,3.7,3.5C28.3,21.8,28.5,21.9,28.7,21.9z"></path>
                <path d="M24.6,15c-0.3-0.1-0.5,0.1-0.6,0.3c-0.1,0.2,0.1,0.5,0.3,0.6c3,0.8,5.4,3.1,6.3,5.9c0.1,0.2,0.3,0.3,0.5,0.3h0.1 c0.3-0.1,0.4-0.3,0.3-0.6C30.6,18.4,28,15.8,24.6,15z"></path>
              </svg>'
        ),
        'telegram' => array(
            'modification' => 'tm',
            'svg' => '<svg fill="#979797" width="39" height="39" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 46 46">
                <path d="M39.3,6.7C34.9,2.4,29.1,0,23,0S11.1,2.4,6.7,6.7S0,16.9,0,23s2.4,11.9,6.7,16.3C11.1,43.6,16.9,46,23,46 s11.9-2.4,16.3-6.7C43.6,34.9,46,29.1,46,23S43.6,11.1,39.3,6.7z M38.2,38.2c-4.1,4.1-9.5,6.3-15.2,6.3c-5.8,0-11.2-2.2-15.2-6.3 c-4.1-4-6.4-9.4-6.4-15.2S3.6,11.8,7.7,7.8c4.1-4.1,9.5-6.3,15.2-6.3c5.8,0,11.2,2.2,15.2,6.3c4.1,4.1,6.3,9.5,6.3,15.2 C44.6,28.8,42.3,34.2,38.2,38.2z"></path>
                <path d="M38.6,10.3c-0.3-0.3-0.7-0.4-1-0.1c-0.3,0.3-0.4,0.7-0.1,1c2.7,3.3,4.2,7.5,4.2,11.8c0,5-1.9,9.7-5.5,13.2 c-3.5,3.5-8.2,5.5-13.2,5.5c-4.6,0-9-1.7-12.5-4.8c-0.3-0.3-0.8-0.2-1,0.1c-0.3,0.3-0.2,0.8,0.1,1c3.7,3.3,8.5,5.1,13.4,5.1 c5.4,0,10.4-2.1,14.2-5.9c3.8-3.8,5.9-8.9,5.9-14.2C43.1,18.4,41.5,13.9,38.6,10.3z"></path>
                <path d="M4.3,23C4.3,12.7,12.7,4.3,23,4.3c4.6,0,9,1.7,12.5,4.8c0.3,0.3,0.8,0.2,1-0.1c0.3-0.3,0.2-0.8-0.1-1 C32.7,4.7,28,2.9,23,2.9C17.6,2.9,12.6,5,8.8,8.8S2.9,17.6,2.9,23c0,4.6,1.6,9.1,4.5,12.7C7.5,35.9,7.7,36,8,36 c0.2,0,0.3-0.1,0.5-0.2c0.3-0.3,0.4-0.7,0.1-1C5.8,31.5,4.3,27.3,4.3,23z"></path>
                <path d="M32.8,9.5L19,16c-0.4,0.2-0.5,0.6-0.3,1c0.2,0.4,0.6,0.5,1,0.3l8.5-4L24,16.7l-9.5,7.7l-5.2-2.3l7.3-3.4 c0.4-0.2,0.5-0.6,0.3-1c-0.2-0.4-0.6-0.5-1-0.3l-7.9,3.7c-0.4,0.2-0.7,0.6-0.7,1.1c0,0.5,0.3,0.9,0.7,1l5.8,2.5l1.7,10.2 c0.1,0.6,1,0.8,1.3,0.3l4.8-7.4l9.1,4.3c0.7,0.3,1.6-0.2,1.7-1l1.3-21.9c0,0,0,0,0-0.1C33.8,9.6,33.3,9.3,32.8,9.5z M16.4,32.2 l-1.1-6.7l11.4-9.2L18,26.1c-0.1,0.1-0.1,0.2-0.2,0.3L16.4,32.2z M18,32l1.1-4.4l1.4,0.7L18,32z M21.2,27l-1.5-0.7l7.5-8.4l-1.1,1.7L21.2,27z M31.1,31.6l-8.6-4l9.7-14.8L31.1,31.6z"></path>
              </svg>'
        )
    );

    public static function detect($links, $config = array()) {
        if (!empty($config)) {
            foreach ($config as $social_network => $modification) {
                self::$_social_networks[$social_network] = $modification;
            }
        }
        $result = array();
        foreach ($links as $link) {
            foreach (self::$_social_networks as $social_network => $data) {
                if (stripos($link, $social_network)) {
                    $item['link'] = $link;
                    $item['modification'] = $data['modification'];
                    $item['svg'] = $data['svg'];
                    $item['text'] = mb_strtoupper($social_network);
                    $result[] = $item;
                    break;
                }
            }
        }
        return $result;
    }
}